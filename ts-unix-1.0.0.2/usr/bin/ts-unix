#!/bin/bash
VERSION_NUMBER="1.0.0.2"
FEATURES_VERSION_NUMBER="0.0.0 (Not Available Yet)"

if [[ "$1" == "--start" ]]; then
    if [[ ! -x /usr/bin/ts-unix-$VERSION_NUMBER ]]; then
        echo "Error: TS-UNIX executable not found!"
        exit 1
    else
        echo "DEBUG: First arg = $1"
        echo "DEBUG: Second arg = $2"
        echo "Starting TS-UNIX $VERSION_NUMBER..."
        /usr/bin/ts-unix-$VERSION_NUMBER
    fi
elif [[ "$1" == "--version" ]]; then
    echo "TS-UNIX version $VERSION_NUMBER"
elif [[ "$1" == "--help" ]]; then
    echo "Usage: ts-unix [--start | --version | --help]"
    echo "--start   Start the TS-UNIX application"
    echo "--version Show the version number"
    echo "--help    Show this help message"
    echo "--clear   Clear the screen before starting"
    echo "--remove  Remove the TS-UNIX application"
    echo "--update  Update the TS-UNIX application"
    echo "DEBUG: First arg = $1"
    echo "DEBUG: Second arg = $2"

elif [[ "$1" == "--start" ]] && [[ "$2" == "--clear" ]]; then
    clear  # Clear screen FIRST before anything else!

    if [[ ! -x /usr/bin/ts-unix-$VERSION_NUMBER ]]; then
        echo "Error: TS-UNIX executable not found!"
        exit 1
    else
        echo "Starting TS-UNIX $VERSION_NUMBER with a clean screen!"
        /usr/bin/ts-unix-$VERSION_NUMBER
        echo "DEBUG: First arg = $1"
        echo "DEBUG: Second arg = $2"
    fi
elif [[ "$1" == "--remove" ]]; then
    echo "DEBUG: First arg = $1"
    echo "DEBUG: Second arg = $2"
    echo "Goodbye!"
    sleep 1
    echo "Will You Use dpkg to remove the TS-UNIX application?"
    sleep 1
    read -n 1 key
    if [[ $key == "y" || $key == "Y" ]]; then
        echo "Removing TS-UNIX..."
        sleep 1
        sudo dpkg -r ts-unix
        echo "TS-UNIX removed successfully!"
    elif [[ $key == "n" || $key == "N" ]]; then
        echo "Using apt To Remove Instead of dpkg but Using dpkg Is Recommended!"
        sleep 1
        sudo apt remove ts-unix
    else
        echo "Invalid option. Please use 'y' or 'n'."
        exit 1
    fi
elif [[ "$1" == "--update" ]]; then
    echo "DEBUG: First arg = $1"
    echo "DEBUG: Second arg = $2"
    echo "Updating TS-UNIX..."
    sudo apt upgrade ts-unix
    echo "TS-UNIX updated successfully!"
elif [[ "$1" == "--reboot" ]]; then
    echo "DEBUG: First arg = $1"
    echo "DEBUG: Second arg = $2"
    echo "Rebooting TS-UNIX..."
    /usr/bin/ts-unix-stop
    /usr/bin/ts-unix-$VERSION_NUMBER
    echo "TS-UNIX rebooted successfully!"
elif [[ "$1" == "--stop" ]]; then
    echo "DEBUG: First arg = $1"
    echo "DEBUG: Second arg = $2"
    echo "Stopping TS-UNIX..."
    /usr/bin/ts-unix-stop
elif [[ "$1" == "--features "]]; then
    echo "DEBUG: First arg = $1"
    echo "DEBUG: Second arg = $2"
    echo "Welcome To TS-UNIX Features $FEATURES_VERSION_NUMBER!"
    echo "Here You Can Add Extensions To TS-UNIX!"
    echo "INFO: 3RD PARTY ESTENSIONS ARE NOT PRESENTED ONLY 1ST PARTY EXTENSIONS ARE PRESENTED!"
    echo "INFO: TO TURN 3RD PARTY EXTENSIONS TO 1ST PARTY ECTENSIONS PLEASE GO TO https://github.com/Coolis1362/TS-UNIX-ALL-VERSIONS/discussions"
    echo "INFO: 1ST PARTY EXTENSIONS WILL BE ADDED SOON!"
else
    echo "The Official ts-unix Bash Script VERSION $VERSION_NUMBER. Invalid option. Type ts-unix --help for usage."
    exit 1
fi
